{
  "name": "cnvkit_batch",
  "title": "CNVkit",
  "summary": "Run CNVkit to call copy number variants and/or build a reference profile",
  "dxapi": "1.0.0",
  "version": "0.2.6",
  "categories": [
    "Structural Variation"
  ],
  "inputSpec": [
    {
      "name": "tumor_bams",
      "label": "Tumor sample mapped reads (BAM)",
      "help": "Mapped reads for each tumor/test sample, in BAM format.",
      "class": "array:file",
      "patterns": [ "*.bam" ],
      "optional": true
    },
    {
      "name": "normal_bams",
      "label": "Normal sample mapped reads (BAM)",
      "help": "Mapped reads for each normal/control sample, in BAM format.",
      "class": "array:file",
      "patterns": [ "*.bam" ],
      "optional": true
    },
    {
      "name": "cn_reference",
      "label": "Copy number reference",
      "help": "Reference profile (.cnn), previously built using CNVkit",
      "class": "file",
      "patterns": [ "*.cn*" ],
      "optional": true
    },
    {
      "name": "baits",
      "label": "Baited regions",
      "help": "Baited (tiled, targeted) genomic regions.",
      "class": "file",
      "optional": true
    },
    {
      "name": "fasta",
      "label": "Reference genome (FASTA)",
      "help": "Reference genome sequences of all chromosomes, together in FASTA format",
      "class": "file",
      "patterns": [ "*.fa", "*.fasta", "*.fa.gz", "*.fasta.gz" ],
      "optional": true
    },
    {
      "name": "access",
      "label": "Accessible regions",
      "help": "Sequencing-accessible genomic regions, matching the reference genome.",
      "class": "file",
      "patterns": [ "*.bed", "*.list", "*.interval_list" ],
      "optional": true
    },
    {
      "name": "annotation",
      "label": "Gene annotation",
      "help": "UCSC genome annotation database file, e.g. refFlat.txt for the RefSeq annotation of your reference genome.",
      "class": "file",
      "patterns": [ "*.txt" ],
      "optional": true
    }
  ],
  "outputSpec": [
    {
      "name": "cn_reference",
      "label": "Copy number reference (.cnn)",
      "class": "file"
    },
    {
      "name": "copy_ratios",
      "label": "Copy ratios (.cnr)",
      "class": "array:file"
    },
    {
      "name": "copy_segments",
      "label": "Copy segments (.cns)",
      "class": "array:file"
    },
    {
      "name": "gainloss",
      "label": "Gain/loss tables (.csv)",
      "class": "array:file"
    },
    {
      "name": "breaks",
      "label": "Breakpoints tables (.csv)",
      "class": "array:file"
    },
    {
      "name": "nexus_cn",
      "label": "Nexus copy number",
      "class": "array:file"
    },
    {
      "name": "metrics",
      "label": "Bin variance metrics (.csv)",
      "class": "file"
    },
    {
      "name": "genders",
      "label": "Genders (guessed)",
      "class": "file"
    },
    {
      "name": "scatter_pdf",
      "label": "Genome profile images (PDF)",
      "class": "file"
    },
    {
      "name": "diagram_pdf",
      "label": "Chromosome diagram images (PDF)",
      "class": "file"
    }
  ],
  "runSpec": {
    "interpreter": "python2.7",
    "file": "src/code.py",
    "execDepends": [
      {"name": "poppler-utils"},
      {"name": "python-numpy"},
      {"name": "python-tk"},
      {"name": "python-matplotlib"},
      {"name": "r-recommended"},
      {"name": "reportlab", "package_manager": "pip"},
      {"name": "pysam",     "package_manager": "pip"},
      {"name": "biopython", "package_manager": "pip"},
      {"name": "cnvkit",    "package_manager": "pip"}
    ],
    "systemRequirements": {
        "main": {"instanceType": "mem1_ssd1_x8"}
    }
  },
  "access": {
    "network": [ "*" ]
  },
  "authorizedUsers": []
}
